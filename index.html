<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DopiDocs - T√†i li·ªáu Kinh t·∫ø, T√†i ch√≠nh, Thu·∫ø</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
    <style>
        /* RESET & BASE STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
        }
        
        :root {
            --ruby-red: #9c1c26;
            --gold: #d4af37;
            --cream: #fffaf0;
            --light-gold: #f8f0d6;
            --dark-red: #7a151d;
            --text-dark: #333333;
            --text-light: #666666;
            --bg-light: #ffffff;
            --border-color: #e0d6c2;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            background-color: var(--cream);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* TYPOGRAPHY */
        h1, h2, h3, h4 {
            color: var(--dark-red);
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 2.2rem;
        }
        
        h2 {
            font-size: 1.8rem;
        }
        
        h3 {
            font-size: 1.5rem;
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        a {
            color: var(--ruby-red);
            text-decoration: none;
            transition: var(--transition);
        }
        
        a:hover {
            color: var(--dark-red);
        }
        
        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background-color: var(--ruby-red);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--dark-red);
            color: white;
        }
        
        .btn-secondary {
            background-color: var(--gold);
            color: var(--text-dark);
        }
        
        .btn-secondary:hover {
            background-color: #c19b2a;
            color: var(--text-dark);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--ruby-red);
            color: var(--ruby-red);
        }
        
        .btn-outline:hover {
            background-color: var(--ruby-red);
            color: white;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* LAYOUT */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* STICKY TELEGRAM BAR */
        .telegram-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(90deg, var(--ruby-red), #e74c3c);
            color: white;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .telegram-bar a {
            color: white;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            text-decoration: none;
        }
        
        .telegram-bar a:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        /* HEADER */
        header {
            background-color: var(--bg-light);
            box-shadow: var(--shadow);
            position: sticky;
            top: 44px;
            z-index: 999;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--ruby-red);
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        /* NAVIGATION */
        .nav-desktop {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .nav-tab {
            font-weight: 600;
            padding: 0.5rem 0;
            position: relative;
            cursor: pointer;
        }
        
        .nav-tab:hover, .nav-tab.active {
            color: var(--ruby-red);
        }
        
        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--ruby-red);
            border-radius: 3px;
        }
        
        /* USER INFO & CART */
        .user-cart-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        .wallet {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            background-color: var(--light-gold);
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--ruby-red);
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* HAMBURGER MENU */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: var(--ruby-red);
            border-radius: 2px;
            transition: var(--transition);
        }
        
        .mobile-menu {
            display: none;
            position: fixed;
            top: 44px;
            left: 0;
            width: 100%;
            background-color: var(--bg-light);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 998;
            padding: 1rem;
            flex-direction: column;
            gap: 1rem;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.active {
            transform: translateY(0);
            display: flex;
        }
        
        /* NEWS TICKER */
        .news-ticker {
            background-color: var(--light-gold);
            padding: 0.75rem 0;
            overflow: hidden;
            white-space: nowrap;
            border-bottom: 1px solid var(--border-color);
        }
        
        .ticker-content {
            display: inline-block;
            animation: ticker 30s linear infinite;
            padding-left: 100%;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        /* MAIN CONTENT AREA */
        .main-content {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
            margin-bottom: 3rem;
        }
        
        /* SIDEBAR - CATEGORIES */
        .sidebar {
            width: 250px;
            flex-shrink: 0;
        }
        
        .categories {
            background-color: var(--bg-light);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }
        
        .categories h3 {
            margin-bottom: 1.2rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gold);
        }
        
        .category-list {
            list-style: none;
        }
        
        .category-item {
            margin-bottom: 0.75rem;
        }
        
        .category-title {
            font-weight: 600;
            padding: 0.6rem 0.75rem;
            border-radius: var(--radius);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .category-title:hover {
            background-color: rgba(212, 175, 55, 0.1);
        }
        
        .category-title.active {
            background-color: rgba(156, 28, 38, 0.1);
            color: var(--ruby-red);
        }
        
        .subcategories {
            list-style: none;
            padding-left: 1.5rem;
            margin-top: 0.5rem;
            display: none;
        }
        
        .subcategories.active {
            display: block;
        }
        
        .subcategory {
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 0.25rem;
        }
        
        .subcategory:hover {
            background-color: rgba(212, 175, 55, 0.1);
        }
        
        .subcategory.active {
            background-color: rgba(156, 28, 38, 0.1);
            color: var(--ruby-red);
            font-weight: 600;
        }
        
        /* SEARCH */
        .search-box {
            background-color: var(--bg-light);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }
        
        .search-box h3 {
            margin-bottom: 1rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--ruby-red);
            box-shadow: 0 0 0 3px rgba(156, 28, 38, 0.1);
        }
        
        /* CONTENT SECTION */
        .content {
            flex-grow: 1;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* BANNER & COUNTDOWN */
        .banner-section {
            margin-bottom: 2rem;
            position: relative;
        }
        
        .banner-container {
            position: relative;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        #main-banner {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .countdown {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .countdown-label {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--gold);
        }
        
        .countdown-timer {
            font-size: 1.5rem;
            font-family: monospace;
            letter-spacing: 1px;
        }
        
        /* PRODUCTS GRID */
        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        /* PRODUCT CARD */
        .product-card {
            background-color: var(--bg-light);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
        }
        
        .product-image {
            height: 180px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-badge {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.3rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
        }
        
        .badge-new {
            background-color: var(--ruby-red);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        
        .badge-update {
            background-color: #f39c12;
        }
        
        .badge-hot {
            background-color: var(--gold);
            color: var(--text-dark);
        }
        
        .badge-gift {
            background-color: #27ae60;
        }
        
        .product-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--dark-red);
        }
        
        .product-category {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }
        
        .product-description {
            margin-bottom: 1rem;
            flex-grow: 1;
        }
        
        .product-price {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .current-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--ruby-red);
        }
        
        .original-price {
            font-size: 1rem;
            color: var(--text-light);
            text-decoration: line-through;
        }
        
        .free-badge {
            font-size: 1.2rem;
            font-weight: 700;
            color: #27ae60;
        }
        
        .product-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        /* HISTORY STYLES */
        .history-content {
            background-color: var(--bg-light);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
        }
        
        .history-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }
        
        .history-item:hover {
            background-color: rgba(212, 175, 55, 0.05);
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item-info {
            flex-grow: 1;
        }
        
        .history-item-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--dark-red);
        }
        
        .history-item-meta {
            display: flex;
            gap: 1.5rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .history-item-date {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .history-item-price {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: var(--ruby-red);
            font-weight: 600;
        }
        
        .history-item-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .empty-history {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-light);
        }
        
        .empty-history .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .history-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        /* ACCOUNT INFO MODAL STYLES */
        .account-info-modal .modal {
            max-width: 500px;
        }
        
        .account-info-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background-color: rgba(212, 175, 55, 0.1);
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
        }
        
        .account-info-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--ruby-red);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .account-info-details {
            flex-grow: 1;
        }
        
        .account-info-details h4 {
            margin-bottom: 0.25rem;
            color: var(--dark-red);
        }
        
        .account-info-balance {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--ruby-red);
        }
        
        .account-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-box {
            background-color: var(--light-gold);
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--ruby-red);
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .giftcode-section {
            margin-bottom: 1.5rem;
        }
        
        /* MODAL STYLES */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: var(--bg-light);
            border-radius: var(--radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            padding: 1.5rem 1.5rem 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-light);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-dark);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        /* SUCCESS ANIMATION */
        .success-modal .modal {
            max-width: 400px;
            text-align: center;
        }
        
        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            position: relative;
        }
        
        .success-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #2ecc71;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transform: scale(0);
            animation: circleAnimation 0.5s ease-out forwards;
        }
        
        .success-check {
            position: absolute;
            top: 20px;
            left: 15px;
            width: 50px;
            height: 30px;
            border-left: 8px solid white;
            border-bottom: 8px solid white;
            transform: rotate(-45deg) scale(0);
            opacity: 0;
            animation: checkAnimation 0.5s ease-out 0.5s forwards;
        }
        
        @keyframes circleAnimation {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes checkAnimation {
            to {
                opacity: 1;
                transform: rotate(-45deg) scale(1);
            }
        }
        
        /* PREVIEW MODAL */
        .preview-image {
            width: 100%;
            height: 300px;
            background-color: #f0f0f0;
            border-radius: var(--radius);
            overflow: hidden;
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .preview-blur {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.9), transparent);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--ruby-red);
            font-size: 1.2rem;
        }
        
        /* MINIGAME */
        .minigame-btn {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            z-index: 100;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--ruby-red), #c0392b);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(156, 28, 38, 0.4);
            font-size: 2rem;
            animation: shake 3s infinite;
            transition: var(--transition);
        }
        
        .minigame-btn:hover {
            transform: scale(1.1);
        }
        
        @keyframes shake {
            0%, 100% { transform: rotate(0); }
            2%, 6%, 10% { transform: rotate(-5deg); }
            4%, 8% { transform: rotate(5deg); }
        }
        
        .envelope-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .envelope {
            width: 120px;
            height: 160px;
            background: linear-gradient(135deg, var(--ruby-red), #c0392b);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .envelope:hover {
            transform: translateY(-10px);
        }
        
        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
        }
        
        .envelope-content {
            color: white;
            font-size: 1.2rem;
            font-weight: 700;
            text-align: center;
        }
        
        /* DONATE SECTION */
        .donate-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .donate-info {
            padding: 2rem;
            background-color: rgba(212, 175, 55, 0.1);
            border-radius: var(--radius);
        }
        
        .donate-qr {
            padding: 2rem;
            background-color: var(--bg-light);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .qr-placeholder {
            width: 200px;
            height: 200px;
            background-color: #f0f0f0;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .account-info {
            background-color: var(--light-gold);
            padding: 1rem;
            border-radius: var(--radius);
            width: 100%;
            margin-bottom: 1.5rem;
            font-family: monospace;
            font-size: 1.1rem;
            word-break: break-all;
        }
        
        /* FAQ */
        .faq-container {
            margin-top: 2rem;
        }
        
        .faq-item {
            margin-bottom: 1rem;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .faq-question {
            padding: 1.25rem 1.5rem;
            background-color: var(--bg-light);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .faq-question:hover {
            background-color: rgba(156, 28, 38, 0.05);
        }
        
        .faq-answer {
            padding: 0 1.5rem;
            background-color: var(--bg-light);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .faq-answer.active {
            padding: 0 1.5rem 1.5rem;
            max-height: 500px;
        }
        
        /* FLOATING CHAT BUTTON */
        .floating-chat {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #0088cc;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 136, 204, 0.4);
            transition: var(--transition);
            font-size: 1.8rem;
        }
        
        .floating-chat:hover {
            transform: scale(1.1);
            background-color: #0077b3;
        }
        
        .floating-chat::after {
            content: "Chat h·ªó tr·ª£ 1:1 (@tomxinh917)";
            position: absolute;
            right: 70px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #333;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            pointer-events: none;
        }
        
        .floating-chat:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* SAKURA ANIMATION */
        .sakura-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .sakura {
            position: absolute;
            top: -20px;
            width: 15px;
            height: 15px;
            background-color: #ffb7c5;
            border-radius: 50% 0 50% 50%;
            transform: rotate(45deg);
            opacity: 0.8;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        /* FOOTER */
        footer {
            background-color: var(--dark-red);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-section h3 {
            color: var(--gold);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.75rem;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        /* UTILITY CLASSES */
        .text-center {
            text-align: center;
        }
        
        .text-gold {
            color: var(--gold);
        }
        
        .text-red {
            color: var(--ruby-red);
        }
        
        .mb-1 {
            margin-bottom: 1rem;
        }
        
        .mb-2 {
            margin-bottom: 2rem;
        }
        
        .mt-1 {
            margin-top: 1rem;
        }
        
        .mt-2 {
            margin-top: 2rem;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* RESPONSIVE */
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .donate-container {
                grid-template-columns: 1fr;
            }
            
            .hamburger {
                display: flex;
            }
            
            .nav-desktop {
                display: none;
            }
            
            .account-stats {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            .user-cart-info {
                order: 3;
                width: 100%;
                justify-content: space-between;
                margin-top: 1rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .countdown {
                position: relative;
                bottom: auto;
                right: auto;
                margin-top: 1rem;
                width: 100%;
            }
            
            .history-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .history-item-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            .minigame-btn {
                bottom: 1rem;
                left: 1rem;
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .floating-chat {
                bottom: 1rem;
                right: 1rem;
                width: 55px;
                height: 55px;
                font-size: 1.6rem;
            }
            
            .floating-chat::after {
                display: none;
            }
        }
        
        @media (max-width: 576px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .modal {
                max-width: 95%;
            }
            
            .envelope {
                width: 100px;
                height: 140px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .donate-qr, .donate-info {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sticky Telegram Bar -->
    <div class="telegram-bar">
        <span>üî• C·∫≠p nh·∫≠t tin t·ª©c Kinh t·∫ø - T√†i ch√≠nh n√≥ng h·ªïi m·ªói ng√†y t·∫°i Group Dopinews</span>
        <a href="https://t.me/dopinews" target="_blank">THAM GIA NGAY</a>
    </div>
    
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üìö</div>
                    <span>DopiDocs</span>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="nav-desktop">
                    <div class="nav-tab active" data-tab="home">TRANG CH·ª¶</div>
                    <div class="nav-tab" data-tab="about">V·ªÄ CH√öNG T√îI</div>
                    <div class="nav-tab" data-tab="policy">CH√çNH S√ÅCH</div>
                    <div class="nav-tab" data-tab="support">H·ªñ TR·ª¢</div>
                    <div class="nav-tab" data-tab="donate">DONATE</div>
                    <div class="nav-tab" data-tab="history">L·ªäCH S·ª¨ MUA H√ÄNG</div>
                </nav>
                
                <!-- Hamburger Menu (Mobile) -->
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <!-- User & Cart Info -->
                <div class="user-cart-info">
                    <div class="user-info" id="user-info-btn">
                        <span id="username">Kh√°ch</span>
                        <div class="wallet">
                            <span>üí∞</span>
                            <span id="user-balance">0 ƒë</span>
                        </div>
                    </div>
                    <div class="cart-icon" id="cart-icon">
                        <span>üõí</span>
                        <div class="cart-count" id="cart-count">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobile-menu">
                <div class="nav-tab active" data-tab="home">TRANG CH·ª¶</div>
                <div class="nav-tab" data-tab="about">V·ªÄ CH√öNG T√îI</div>
                <div class="nav-tab" data-tab="policy">CH√çNH S√ÅCH</div>
                <div class="nav-tab" data-tab="support">H·ªñ TR·ª¢</div>
                <div class="nav-tab" data-tab="donate">DONATE</div>
                <div class="nav-tab" data-tab="history">L·ªäCH S·ª¨ MUA H√ÄNG</div>
            </div>
        </div>
    </header>
    
    <!-- News Ticker -->
    <div class="news-ticker">
        <div class="ticker-content">
            üî• TIN N√ìNG: ƒê√£ c·∫≠p nh·∫≠t Ngh·ªã ƒë·ªãnh m·ªõi v·ªÅ Thu·∫ø TNDN... | ‚ö° ∆Øu ƒë√£i: Nh·∫≠p m√£ TET2026 nh·∫≠n ngay 50k...
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Categories -->
                <div class="categories">
                    <h3>üìÇ DANH M·ª§C</h3>
                    <ul class="category-list" id="category-list">
                        <!-- Categories will be populated by JavaScript -->
                    </ul>
                </div>
                
                <!-- Search -->
                <div class="search-box">
                    <h3>üîç T√åM KI·∫æM</h3>
                    <input type="text" class="search-input" id="search-input" placeholder="Nh·∫≠p t√™n t√†i li·ªáu, t·ª´ kh√≥a...">
                </div>
            </aside>
            
            <!-- Content -->
            <main class="content">
                <!-- Home Tab -->
                <section class="tab-content active" id="home">
                    <!-- Banner & Countdown -->
                    <div class="banner-section">
                        <div class="banner-container">
                            <img id="main-banner" src="https://intphcm.com/data/upload/banner-tet-la-gi.jpg" alt=" DopiDocs Banner - T√†i li·ªáu Kinh t·∫ø, T√†i ch√≠nh, Thu·∫ø">
                            <div class="countdown">
                                <div class="countdown-label">∆Øu ƒë√£i T·∫øt k·∫øt th√∫c sau:</div>
                                <div class="countdown-timer" id="countdown-timer">00:00:00:00</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Products -->
                    <div class="products-header">
                        <h2>üìö T√ÄI LI·ªÜU N·ªîI B·∫¨T</h2>
                        <div class="filter-buttons">
                            <button class="btn btn-outline btn-small active" data-filter="all">T·∫•t c·∫£</button>
                            <button class="btn btn-outline btn-small" data-filter="new">M·ªõi nh·∫•t</button>
                            <button class="btn btn-outline btn-small" data-filter="hot">Hot</button>
                        </div>
                    </div>
                    
                    <div class="products-grid" id="products-grid">
                        <!-- Products will be populated by JavaScript -->
                    </div>
                    
                    <!-- FAQ -->
                    <div class="faq-container">
                        <h2 class="text-center">‚ùì C√ÇU H·ªéI TH∆Ø·ªúNG G·∫∂P</h2>
                        <div class="faq-list" id="faq-list">
                            <!-- FAQ items will be populated by JavaScript -->
                        </div>
                    </div>
                </section>
                
                <!-- About Tab -->
                <section class="tab-content" id="about">
                    <h2>V·ªÄ CH√öNG T√îI</h2>
                    <div class="about-content">
                        <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi <strong>DopiDocs</strong> - N·ªÅn t·∫£ng chia s·∫ª v√† mua b√°n t√†i li·ªáu chuy√™n ng√†nh Kinh t·∫ø, T√†i ch√≠nh v√† Thu·∫ø h√†ng ƒë·∫ßu Vi·ªát Nam.</p>
                        
                        <h3 class="mt-2">S·ª© m·ªánh c·ªßa ch√∫ng t√¥i</h3>
                        <p>Ch√∫ng t√¥i cam k·∫øt cung c·∫•p nh·ªØng t√†i li·ªáu ch·∫•t l∆∞·ª£ng cao, c·∫≠p nh·∫≠t nh·∫•t t·ª´ c√°c chuy√™n gia trong ng√†nh, gi√∫p b·∫°n n·∫Øm b·∫Øt ki·∫øn th·ª©c v√† ·ª©ng d·ª•ng v√†o c√¥ng vi·ªác th·ª±c t·∫ø.</p>
                        
                        <h3 class="mt-2">ƒê·ªôi ng≈© chuy√™n gia</h3>
                        <p>ƒê·ªôi ng≈© c·ªßa ch√∫ng t√¥i bao g·ªìm nh·ªØng chuy√™n gia gi√†u kinh nghi·ªám trong lƒ©nh v·ª±c Kinh t·∫ø, T√†i ch√≠nh v√† Thu·∫ø, lu√¥n c·∫≠p nh·∫≠t nh·ªØng thay ƒë·ªïi m·ªõi nh·∫•t t·ª´ ch√≠nh s√°ch nh√† n∆∞·ªõc.</p>
                        
                        <h3 class="mt-2">Cam k·∫øt ch·∫•t l∆∞·ª£ng</h3>
                        <ul style="padding-left: 2rem; margin-top: 1rem;">
                            <li>T√†i li·ªáu ƒë∆∞·ª£c ki·ªÉm duy·ªát k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi ƒëƒÉng t·∫£i</li>
                            <li>ƒê·∫£m b·∫£o t√≠nh ch√≠nh x√°c v√† c·∫≠p nh·∫≠t nh·∫•t</li>
                            <li>Link t·∫£i Google Drive vƒ©nh vi·ªÖn</li>
                            <li>H·ªó tr·ª£ 24/7 qua Telegram</li>
                        </ul>
                    </div>
                </section>
                
                <!-- Policy Tab -->
                <section class="tab-content" id="policy">
                    <h2>CH√çNH S√ÅCH</h2>
                    <div class="policy-content">
                        <h3>1. Ch√≠nh s√°ch mua h√†ng</h3>
                        <ul style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>T·∫•t c·∫£ t√†i li·ªáu sau khi mua c√≥ th·ªÉ t·∫£i v·ªÅ ngay l·∫≠p t·ª©c</li>
                            <li>Link t·∫£i vƒ©nh vi·ªÖn, kh√¥ng gi·ªõi h·∫°n s·ªë l·∫ßn t·∫£i</li>
                            <li>H·ªó tr·ª£ t·∫£i l·∫°i n·∫øu link b·ªã l·ªói</li>
                            <li>Kh√¥ng ho√†n ti·ªÅn sau khi ƒë√£ mua t√†i li·ªáu</li>
                        </ul>
                        
                        <h3>2. Ch√≠nh s√°ch b·∫£o m·∫≠t</h3>
                        <ul style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>Th√¥ng tin c√° nh√¢n ƒë∆∞·ª£c b·∫£o m·∫≠t tuy·ªát ƒë·ªëi</li>
                            <li>Kh√¥ng chia s·∫ª th√¥ng tin cho b√™n th·ª© ba</li>
                            <li>Thanh to√°n an to√†n qua v√≠ ƒëi·ªán t·ª≠ n·ªôi b·ªô</li>
                        </ul>
                        
                        <h3>3. Ch√≠nh s√°ch h·ªó tr·ª£</h3>
                        <ul style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>H·ªó tr·ª£ qua Telegram: @tomxinh917</li>
                            <li>Th·ªùi gian h·ªó tr·ª£: 8:00 - 22:00 h√†ng ng√†y</li>
                            <li>Ph·∫£n h·ªìi trong v√≤ng 30 ph√∫t</li>
                        </ul>
                    </div>
                </section>
                
                <!-- Support Tab -->
                <section class="tab-content" id="support">
                    <h2>H·ªñ TR·ª¢</h2>
                    <div class="support-content">
                        <h3>H∆∞·ªõng d·∫´n mua t√†i li·ªáu</h3>
                        <ol style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>ƒêƒÉng k√Ω t√†i kho·∫£n (mi·ªÖn ph√≠)</li>
                            <li>N·∫°p ti·ªÅn v√†o v√≠ b·∫±ng giftcode ho·∫∑c chuy·ªÉn kho·∫£n</li>
                            <li>T√¨m t√†i li·ªáu c·∫ßn mua v√† th√™m v√†o gi·ªè h√†ng</li>
                            <li>Thanh to√°n v√† t·∫£i v·ªÅ ngay l·∫≠p t·ª©c</li>
                        </ol>
                        
                        <h3>H∆∞·ªõng d·∫´n n·∫°p ti·ªÅn</h3>
                        <ol style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>V√†o m·ª•c T√†i kho·∫£n (click v√†o t√™n/s·ªë d∆∞ c·ªßa b·∫°n)</li>
                            <li>Nh·∫≠p m√£ giftcode v√†o √¥ "N·∫°p ti·ªÅn b·∫±ng Giftcode"</li>
                            <li>Ho·∫∑c chuy·ªÉn kho·∫£n v√†o s·ªë t√†i kho·∫£n cung c·∫•p ·ªü m·ª•c Donate</li>
                            <li>Sau khi chuy·ªÉn kho·∫£n, li√™n h·ªá admin ƒë·ªÉ ƒë∆∞·ª£c c·ªông ti·ªÅn</li>
                        </ol>
                        
                        <h3>Li√™n h·ªá h·ªó tr·ª£</h3>
                        <ul style="padding-left: 2rem; margin-bottom: 1.5rem;">
                            <li>Telegram: @tomxinh917</li>
                            <li>Group Telegram: @dopinews</li>
                            <li>Email: support@dopidocs.vn</li>
                        </ul>
                    </div>
                </section>
                
                <!-- Donate Tab -->
                <section class="tab-content" id="donate">
                    <h2 class="text-center">‚ù§Ô∏è DONATE - ·ª¶NG H·ªò DOPIDOCS</h2>
                    <p class="text-center mb-2">M·ªçi ƒë√≥ng g√≥p c·ªßa b·∫°n s·∫Ω gi√∫p ch√∫ng t√¥i duy tr√¨ server, ph√°t tri·ªÉn th√™m nhi·ªÅu t√†i li·ªáu ch·∫•t l∆∞·ª£ng v√† h·ªó tr·ª£ c·ªông ƒë·ªìng.</p>
                    
                    <div class="donate-container">
                        <div class="donate-info">
                            <h3>V√¨ sao n√™n ·ªßng h·ªô?</h3>
                            <p>DopiDocs ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi s·ª© m·ªánh cung c·∫•p ki·∫øn th·ª©c ch·∫•t l∆∞·ª£ng cho c·ªông ƒë·ªìng. Tuy nhi√™n, ƒë·ªÉ duy tr√¨ v√† ph√°t tri·ªÉn, ch√∫ng t√¥i c·∫ßn s·ª± h·ªó tr·ª£ t·ª´ b·∫°n.</p>
                            <p>M·ªói kho·∫£n ƒë√≥ng g√≥p d√π nh·ªè c≈©ng c√≥ √Ω nghƒ©a l·ªõn, gi√∫p:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li>Duy tr√¨ h·ªá th·ªëng server v√† l∆∞u tr·ªØ</li>
                                <li>T·∫°o th√™m nhi·ªÅu t√†i li·ªáu mi·ªÖn ph√≠</li>
                                <li>H·ªó tr·ª£ c√°c chuy√™n gia bi√™n so·∫°n t√†i li·ªáu</li>
                                <li>Ph√°t tri·ªÉn t√≠nh nƒÉng m·ªõi cho website</li>
                            </ul>
                            <p class="mt-1">C·∫£m ∆°n b·∫°n ƒë√£ ƒë·ªìng h√†nh c√πng DopiDocs!</p>
                        </div>
                        
                        <div class="donate-qr">
                            <div class="qr-placeholder">
                                <div>QR Code Placeholder<br>(Thay b·∫±ng QR th·∫≠t)</div>
                            </div>
                            <h3>Th√¥ng tin chuy·ªÉn kho·∫£n</h3>
                            <div class="account-info" id="account-number">
                                STK: 1234567890123 - Ng√¢n h√†ng VCB - Ch·ªß TK: NGUYEN VAN A
                            </div>
                            <p class="mb-1">N·ªôi dung chuy·ªÉn kho·∫£n: <strong>DONATE DOPIDOCS + T√™n c·ªßa b·∫°n</strong></p>
                            <button class="btn btn-secondary" id="copy-account">Sao ch√©p s·ªë t√†i kho·∫£n</button>
                        </div>
                    </div>
                </section>
                
                <!-- History Tab -->
                <section class="tab-content" id="history">
                    <h2>üìã L·ªäCH S·ª¨ MUA H√ÄNG</h2>
                    <div class="history-content">
                        <p>Danh s√°ch t√†i li·ªáu b·∫°n ƒë√£ mua. B·∫•m v√†o n√∫t "T·∫£i xu·ªëng" ƒë·ªÉ t·∫£i l·∫°i b·∫•t c·ª© l√∫c n√†o.</p>
                        
                        <div class="history-filters">
                            <button class="btn btn-outline btn-small active" data-history-filter="all">T·∫•t c·∫£</button>
                            <button class="btn btn-outline btn-small" data-history-filter="recent">G·∫ßn ƒë√¢y</button>
                            <button class="btn btn-outline btn-small" data-history-filter="free">Mi·ªÖn ph√≠</button>
                        </div>
                        
                        <div id="history-list">
                            <!-- History items will be populated by JavaScript -->
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>DopiDocs</h3>
                    <p>N·ªÅn t·∫£ng chia s·∫ª t√†i li·ªáu chuy√™n ng√†nh Kinh t·∫ø, T√†i ch√≠nh, Thu·∫ø h√†ng ƒë·∫ßu Vi·ªát Nam.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Li√™n k·∫øt nhanh</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-tab="home">Trang ch·ªß</a></li>
                        <li><a href="#" data-tab="about">V·ªÅ ch√∫ng t√¥i</a></li>
                        <li><a href="#" data-tab="policy">Ch√≠nh s√°ch</a></li>
                        <li><a href="#" data-tab="support">H·ªó tr·ª£</a></li>
                        <li><a href="#" data-tab="history">L·ªãch s·ª≠ mua h√†ng</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Li√™n h·ªá</h3>
                    <ul class="footer-links">
                        <li>üì± Telegram: @tomxinh917</li>
                        <li>üë• Group: @dopinews</li>
                        <li>üìß Email: support@dopidocs.vn</li>
                        <li>üè¢ ƒê·ªãa ch·ªâ: H√† N·ªôi, Vi·ªát Nam</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>¬© 2026 DopiDocs. T·∫•t c·∫£ c√°c quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
            </div>
        </div>
    </footer>
    
    <!-- Minigame Button -->
    <div class="minigame-btn" id="minigame-btn">
        <span>üßß</span>
    </div>
    
    <!-- Floating Chat Button -->
    <a href="https://t.me/tomxinh917" target="_blank" class="floating-chat">
        <span>üí¨</span>
    </a>
    
    <!-- Sakura Animation -->
    <div class="sakura-container" id="sakura-container"></div>
    
    <!-- MODALS -->
    
    <!-- Account Modal -->
    <div class="modal-overlay account-info-modal" id="account-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">T√†i kho·∫£n c·ªßa b·∫°n</h3>
                <button class="modal-close" id="close-account">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Login Form (shown when not logged in) -->
                <div id="login-form">
                    <h3 class="text-center mb-2">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h3>
                    <div class="mb-1">
                        <label for="login-username">T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" class="search-input" id="login-username" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p">
                    </div>
                    <div class="mb-2">
                        <label for="login-password">M·∫≠t kh·∫©u</label>
                        <input type="password" class="search-input" id="login-password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                    </div>
                    <div class="mb-2">
                        <button class="btn btn-primary" id="do-login" style="width: 100%;">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</button>
                    </div>
                    <p class="text-center">Ch∆∞a c√≥ t√†i kho·∫£n? H·ªá th·ªëng s·∫Ω t·ª± t·∫°o t√†i kho·∫£n m·ªõi khi b·∫°n ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu.</p>
                </div>
                
                <!-- Account Info (shown when logged in) -->
                <div id="account-info" class="hidden">
                    <div class="account-info-header">
                        <div class="account-info-avatar" id="account-avatar">U</div>
                        <div class="account-info-details">
                            <h4 id="account-name">Username</h4>
                            <div class="account-info-balance">
                                <span>üí∞</span>
                                <span id="account-balance-text">0 ƒë</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="account-stats">
                        <div class="stat-box">
                            <div class="stat-value" id="stat-purchases">0</div>
                            <div class="stat-label">ƒê√£ mua</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="stat-saved">0 ƒë</div>
                            <div class="stat-label">ƒê√£ ti·∫øt ki·ªám</div>
                        </div>
                    </div>
                    
                    <!-- Giftcode Section -->
                    <div class="giftcode-section">
                        <h4>üéÅ N·∫°p ti·ªÅn b·∫±ng Giftcode</h4>
                        <div class="mb-1">
                            <input type="text" class="search-input" id="account-giftcode-input" placeholder="Nh·∫≠p m√£ giftcode...">
                        </div>
                        <button class="btn btn-secondary" id="account-apply-giftcode" style="width: 100%;">√Åp d·ª•ng m√£</button>
                        <div class="mt-1" style="font-size: 0.9rem; color: var(--text-light);">
                            <p>M√£ khuy·∫øn m√£i: <strong>TET2026</strong> (50k), <strong>KHAIXUAN20K</strong> (20k), <strong>VIP100K</strong> (100k)</p>
                        </div>
                    </div>
                    
                    <!-- Logout Button -->
                    <div class="mt-2">
                        <button class="btn btn-outline" id="logout-btn" style="width: 100%;">ƒêƒÉng xu·∫•t</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cart Modal -->
    <div class="modal-overlay" id="cart-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h3>
                <button class="modal-close" id="close-cart">√ó</button>
            </div>
            <div class="modal-body">
                <div id="cart-items">
                    <!-- Cart items will be populated by JavaScript -->
                </div>
                <div class="cart-total" style="display: flex; justify-content: space-between; font-weight: 700; font-size: 1.2rem; padding: 1rem 0; border-top: 2px solid var(--border-color);">
                    <span>T·ªïng c·ªông:</span>
                    <span id="cart-total">0 ƒë</span>
                </div>
                <button class="btn btn-primary" id="checkout-btn" style="width: 100%;">Thanh to√°n</button>
            </div>
        </div>
    </div>
    
    <!-- Preview Modal -->
    <div class="modal-overlay" id="preview-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Xem th·ª≠ t√†i li·ªáu</h3>
                <button class="modal-close" id="close-preview">√ó</button>
            </div>
            <div class="modal-body">
                <div class="preview-image">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDUwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjUwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNGRkZGRkUiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjE1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE4IiBmaWxsPSIjMzMzMzMzIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5QcmV2aWV3IEltYWdlIFBsYWNlaG9sZGVyPC90ZXh0Pgo8L3N2Zz4K" alt="Preview Image">
                    <div class="preview-blur">
                        Mua ƒë·ªÉ xem b·∫£n ƒë·∫ßy ƒë·ªß
                    </div>
                </div>
                <div id="preview-info">
                    <!-- Preview info will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Minigame Modal -->
    <div class="modal-overlay" id="minigame-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üßß L√¨ X√¨ ƒê·∫ßu NƒÉm - Rinh Qu√† May M·∫Øn</h3>
                <button class="modal-close" id="close-minigame">√ó</button>
            </div>
            <div class="modal-body">
                <p class="text-center mb-2">Ch·ªçn 1 trong 3 phong bao l√¨ x√¨ ƒë·ªÉ nh·∫≠n qu√† may m·∫Øn!</p>
                <div class="envelope-options">
                    <div class="envelope" data-envelope="1">
                        <div class="envelope-content">Phong Bao 1</div>
                    </div>
                    <div class="envelope" data-envelope="2">
                        <div class="envelope-content">Phong Bao 2</div>
                    </div>
                    <div class="envelope" data-envelope="3">
                        <div class="envelope-content">Phong Bao 3</div>
                    </div>
                </div>
                <div id="minigame-result" class="text-center"></div>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div class="modal-overlay success-modal" id="success-modal">
        <div class="modal">
            <div class="modal-body">
                <div class="success-icon">
                    <div class="success-circle"></div>
                    <div class="success-check"></div>
                </div>
                <h3 class="modal-title text-center">Thanh to√°n th√†nh c√¥ng!</h3>
                <p class="text-center">T√†i li·ªáu ƒë√£ ƒë∆∞·ª£c th√™m v√†o l·ªãch s·ª≠ mua h√†ng c·ªßa b·∫°n. B·∫°n c√≥ th·ªÉ t·∫£i v·ªÅ ngay b√¢y gi·ªù.</p>
            </div>
        </div>
    </div>
    
    <!-- News Popup Modal -->
    <div class="modal-overlay" id="news-popup">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üéâ Tin T·∫øt 2026</h3>
                <button class="modal-close" id="close-news">√ó</button>
            </div>
            <div class="modal-body">
                <p>Ch√†o Xu√¢n 2026! C·∫≠p nh·∫≠t b·ªô t√†i li·ªáu Thu·∫ø m·ªõi nh·∫•t th√°ng 1.</p>
                <p>T·∫∑ng ngay m√£ <strong>'TET2026'</strong> cho th√†nh vi√™n m·ªõi.</p>
                <p>∆Øu ƒë√£i ƒë·∫∑c bi·ªát trong th√°ng 1: Gi·∫£m 30% cho t·∫•t c·∫£ t√†i li·ªáu thu·∫ø.</p>
                <button class="btn btn-primary mt-1" id="close-news-btn" style="width: 100%;">ƒê√≥ng</button>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // KHU V·ª∞C CH·ªàNH S·ª¨A S·∫¢N PH·∫®M - B·∫ÆT ƒê·∫¶U T·ª™ ƒê√ÇY
        // ============================================
        
        /*
        H∆Ø·ªöNG D·∫™N TH√äM S·∫¢N PH·∫®M M·ªöI:
        1. Sao ch√©p 1 block s·∫£n ph·∫©m b√™n d∆∞·ªõi
        2. D√°n v√†o cu·ªëi m·∫£ng products (tr∆∞·ªõc d·∫•u ])
        3. ƒê·∫£m b·∫£o th√™m d·∫•u ph·∫©y (,) sau block s·∫£n ph·∫©m tr∆∞·ªõc ƒë√≥
        4. C·∫≠p nh·∫≠t c√°c th√¥ng tin: id, name, category, subcategory, price, salePrice, badge, description, coverImage, downloadLink
        */
        
        const products = [
            // 3 S·∫¢N PH·∫®M THU·∫æ B·∫ÆT BU·ªòC
            {
                id: "tax_tndn_2026",
                name: "B·ªô t√†i li·ªáu Thu·∫ø TNDN",
                category: "Thu·∫ø",
                subcategory: "Thu·∫ø TNDN",
                price: 50000,
                salePrice: 35000,
                badge: "ƒê√É C·∫¨P NH·∫¨T",
                description: "M√¥ t·∫£ chi ti·∫øt v·ªÅ thu·∫ø TNDN. Bao g·ªìm bi·ªÉu m·∫´u, c√°ch t√≠nh, v√† case study th·ª±c t·∫ø. C√≥ k√®m video ng·∫Øn ",
                coverImage: "https://image3.luatvietnam.vn/uploaded/images/original/2025/08/06/thue-suat-thue-thu-nhap-doanh-nghiep_0608102625.png",
                downloadLink: "https://drive.google.com/drive/folders/10FmIZIhZD6IuIdynwQAF381QO1PlshkZ?usp=drive_link"
            },
            {
                id: "tax_gtgt_guide",
                name: "B·ªô t√†i li·ªáu Thu·∫ø GTGT",
                category: "Thu·∫ø",
                subcategory: "Thu·∫ø GTGT",
                price: 50000,
                salePrice: 35000,
                badge: "ƒê√É C·∫¨P NH·∫¨T",
                description: "C·∫≠p nh·∫≠t m·ªõi nh·∫•t v·ªÅ quy ƒë·ªãnh h√≥a ƒë∆°n ƒëi·ªán t·ª≠ v√† k√™ khai thu·∫ø GTGT. C√≥ k√®m video ng·∫Øn gi·∫£i th√≠ch chi ti·∫øt.",
                coverImage: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQOUHqpVlegFs24OCANABAw87NERMEFjy1MlQ&s",
                downloadLink: "https://drive.google.com/drive/folders/12F673R3TbHZHUStbKZdCbCyhCHNPBCqk?usp=drive_link"
            },
            {
                id: "tax_tncn_2026",
                name: "Bi·ªÉu thu·∫ø TNCN & C√°c kho·∫£n gi·∫£m tr·ª´ gia c·∫£nh 2026",
                category: "Thu·∫ø",
                subcategory: "Thu·∫ø TNCN",
                price: 30000,
                salePrice: 20000,
                badge: "ƒê√É C·∫¨P NH·∫¨T",
                description: "Bi·ªÉu thu·∫ø TNCN m·ªõi nh·∫•t 2026, h∆∞·ªõng d·∫´n t√≠nh thu·∫ø, c√°c kho·∫£n gi·∫£m tr·ª´ gia c·∫£nh, gi·∫£m tr·ª´ b·∫£n th√¢n v√† ng∆∞·ªùi ph·ª• thu·ªôc.",
                coverImage: "https://skds.1cdn.vn/thumbs/1200x630/2026/01/09/suckhoedoisong.qltns.mediacdn.vn-zoom-600_315-324455921873985536-2026-1-8-_chatgpt-image-jul-22-2025-095502-am1png-17678699368161934484263-38-0-788-1200-crop-1767869969462364882323.jpg",
                downloadLink: "https://drive.google.com/drive/folders/1qnWU2FGQFstNHu4cufgqICffhibMC3d7?usp=drive_link"
            },
            
            // S·∫¢N PH·∫®M MI·ªÑN PH√ç T·∫æT
           
           
            // S·∫¢N PH·∫®M KINH T·∫æ
            
        
            // S·∫¢N PH·∫®M T√ÄI CH√çNH
    
            // TH√äM S·∫¢N PH·∫®M THU·∫æ
       
        ];
        
        // ============================================
        // KHU V·ª∞C D·ªÆ LI·ªÜU (giftCodes)
        // ============================================
        
        const giftCodes = {
            "TET2026": 50000,
            "KHAIXUAN20K": 20000,
            "VIP100K": 100000,
            "DONATE": 100000,
            "WELCOME10K": 10000
        };
        
        // ============================================
        // KHU V·ª∞C L∆ØU TR·ªÆ localStorage helpers
        // ============================================
        
        // T√™n keys cho localStorage
        const STORAGE_KEYS = {
            USERS: 'dopi_users',
            SESSION: 'dopi_session',
            PRODUCTS: 'dopi_products',
            CART: 'dopi_cart',
            HISTORY: 'dopi_history',
            CODES: 'dopi_codes'
        };
        
        // Kh·ªüi t·∫°o d·ªØ li·ªáu m·∫´u n·∫øu ch∆∞a c√≥
        function initializeData() {
            // L∆∞u s·∫£n ph·∫©m v√†o localStorage
            if (!localStorage.getItem(STORAGE_KEYS.PRODUCTS)) {
                localStorage.setItem(STORAGE_KEYS.PRODUCTS, JSON.stringify(products));
            }
            
            // L∆∞u gift codes
            if (!localStorage.getItem(STORAGE_KEYS.CODES)) {
                localStorage.setItem(STORAGE_KEYS.CODES, JSON.stringify(giftCodes));
            }
            
            // Kh·ªüi t·∫°o users n·∫øu ch∆∞a c√≥
            if (!localStorage.getItem(STORAGE_KEYS.USERS)) {
                const defaultUsers = {
                    "admin": {
                        username: "admin",
                        password: "admin123",
                        balance: 500000,
                        joinedDate: new Date().toISOString()
                    },
                    "guest": {
                        username: "guest",
                        password: "guest123",
                        balance: 100000,
                        joinedDate: new Date().toISOString()
                    }
                };
                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(defaultUsers));
            }
            
            // Kh·ªüi t·∫°o cart n·∫øu ch∆∞a c√≥
            if (!localStorage.getItem(STORAGE_KEYS.CART)) {
                localStorage.setItem(STORAGE_KEYS.CART, JSON.stringify([]));
            }
            
            // Kh·ªüi t·∫°o history n·∫øu ch∆∞a c√≥
            if (!localStorage.getItem(STORAGE_KEYS.HISTORY)) {
                localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify([]));
            }
        }
        
        // L·∫•y d·ªØ li·ªáu t·ª´ localStorage
        function getFromStorage(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        }
        
        // L∆∞u d·ªØ li·ªáu v√†o localStorage
        function saveToStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }
        
        // L·∫•y th√¥ng tin user hi·ªán t·∫°i
        function getCurrentUser() {
            const session = getFromStorage(STORAGE_KEYS.SESSION);
            if (!session || !session.username) return null;
            
            const users = getFromStorage(STORAGE_KEYS.USERS);
            return users[session.username] || null;
        }
        
        // C·∫≠p nh·∫≠t s·ªë d∆∞ user
        function updateUserBalance(username, amount) {
            const users = getFromStorage(STORAGE_KEYS.USERS);
            if (users && users[username]) {
                users[username].balance += amount;
                saveToStorage(STORAGE_KEYS.USERS, users);
                return users[username].balance;
            }
            return 0;
        }
        
        // L·∫•y gi·ªè h√†ng
        function getCart() {
            return getFromStorage(STORAGE_KEYS.CART) || [];
        }
        
        // Th√™m v√†o gi·ªè h√†ng
        function addToCart(productId) {
            const cart = getCart();
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    quantity: 1,
                    addedAt: new Date().toISOString()
                });
            }
            
            saveToStorage(STORAGE_KEYS.CART, cart);
            updateCartCount();
            return cart;
        }
        
        // X√≥a kh·ªèi gi·ªè h√†ng
        function removeFromCart(productId) {
            let cart = getCart();
            cart = cart.filter(item => item.id !== productId);
            saveToStorage(STORAGE_KEYS.CART, cart);
            updateCartCount();
            return cart;
        }
        
        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng trong gi·ªè h√†ng
        function updateCartItemQuantity(productId, quantity) {
            const cart = getCart();
            const item = cart.find(item => item.id === productId);
            
            if (item) {
                if (quantity <= 0) {
                    return removeFromCart(productId);
                } else {
                    item.quantity = quantity;
                }
            }
            
            saveToStorage(STORAGE_KEYS.CART, cart);
            updateCartCount();
            return cart;
        }
        
        // X√≥a to√†n b·ªô gi·ªè h√†ng
        function clearCart() {
            saveToStorage(STORAGE_KEYS.CART, []);
            updateCartCount();
            return [];
        }
        
        // L·∫•y l·ªãch s·ª≠ mua h√†ng
        function getPurchaseHistory() {
            const user = getCurrentUser();
            if (!user) return [];
            
            const allHistory = getFromStorage(STORAGE_KEYS.HISTORY) || [];
            // Ch·ªâ l·∫•y l·ªãch s·ª≠ c·ªßa user hi·ªán t·∫°i
            return allHistory.filter(item => item.username === user.username) || [];
        }
        
        // Th√™m v√†o l·ªãch s·ª≠ mua h√†ng
        function addToHistory(items) {
            const user = getCurrentUser();
            if (!user) return [];
            
            const history = getFromStorage(STORAGE_KEYS.HISTORY) || [];
            const purchaseDate = new Date().toISOString();
            
            items.forEach(item => {
                // T√¨m s·∫£n ph·∫©m ƒë·ªÉ l·∫•y th√¥ng tin
                const product = products.find(p => p.id === item.id);
                
                if (product) {
                    history.push({
                        id: product.id,
                        username: user.username,
                        name: product.name,
                        purchaseDate: purchaseDate,
                        price: product.salePrice || product.price,
                        quantity: item.quantity,
                        downloadLink: product.downloadLink
                    });
                }
            });
            
            saveToStorage(STORAGE_KEYS.HISTORY, history);
            return history;
        }
        
        // Ki·ªÉm tra s·∫£n ph·∫©m ƒë√£ mua ch∆∞a
        function isProductPurchased(productId) {
            const user = getCurrentUser();
            if (!user) return false;
            
            const history = getPurchaseHistory();
            return history.some(item => item.id === productId);
        }
        
        // ============================================
        // KHU V·ª∞C UI RENDER
        // ============================================
        
        // Render danh m·ª•c
        function renderCategories() {
            const categoriesContainer = document.getElementById('category-list');
            if (!categoriesContainer) return;
            
            // T·∫°o c·∫•u tr√∫c danh m·ª•c t·ª´ s·∫£n ph·∫©m
            const categories = {};
            products.forEach(product => {
                if (!categories[product.category]) {
                    categories[product.category] = new Set();
                }
                categories[product.category].add(product.subcategory);
            });
            
            let html = '';
            Object.keys(categories).forEach(category => {
                const subcategories = Array.from(categories[category]);
                const categoryId = category.toLowerCase().replace(/\s+/g, '-');
                
                html += `
                <li class="category-item">
                    <div class="category-title" data-category="${categoryId}">
                        <span>${category}</span>
                        <span>+</span>
                    </div>
                    <ul class="subcategories" id="subcategories-${categoryId}">
                        <li class="subcategory active" data-subcategory="all-${categoryId}">T·∫•t c·∫£</li>
                        ${subcategories.map(sub => `
                            <li class="subcategory" data-subcategory="${sub.toLowerCase().replace(/\s+/g, '-')}">${sub}</li>
                        `).join('')}
                    </ul>
                </li>
                `;
            });
            
            categoriesContainer.innerHTML = html;
            
            // Th√™m s·ª± ki·ªán cho danh m·ª•c
            document.querySelectorAll('.category-title').forEach(title => {
                title.addEventListener('click', function() {
                    const categoryId = this.getAttribute('data-category');
                    const subcategories = document.getElementById(`subcategories-${categoryId}`);
                    
                    // ƒê√≥ng/m·ªü subcategories
                    if (subcategories.classList.contains('active')) {
                        subcategories.classList.remove('active');
                        this.querySelector('span:last-child').textContent = '+';
                    } else {
                        // ƒê√≥ng t·∫•t c·∫£ c√°c subcategories kh√°c
                        document.querySelectorAll('.subcategories.active').forEach(sub => {
                            sub.classList.remove('active');
                            sub.previousElementSibling.querySelector('span:last-child').textContent = '+';
                        });
                        
                        subcategories.classList.add('active');
                        this.querySelector('span:last-child').textContent = '-';
                    }
                });
            });
            
            // Th√™m s·ª± ki·ªán cho subcategories
            document.querySelectorAll('.subcategory').forEach(sub => {
                sub.addEventListener('click', function() {
                    const categoryTitle = this.closest('.category-item').querySelector('.category-title');
                    const category = categoryTitle.getAttribute('data-category').replace('all-', '').replace(/-/g, ' ');
                    const subcategory = this.getAttribute('data-subcategory').replace('all-', '').replace(/-/g, ' ');
                    
                    // C·∫≠p nh·∫≠t active state
                    document.querySelectorAll('.subcategory.active').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Filter s·∫£n ph·∫©m
                    filterProducts(category, subcategory === 'all' ? '' : subcategory);
                });
            });
        }
        
        // Render s·∫£n ph·∫©m
        function renderProducts(filteredProducts = products) {
            const productsGrid = document.getElementById('products-grid');
            if (!productsGrid) return;
            
            const user = getCurrentUser();
            const history = getPurchaseHistory();
            const purchasedIds = history.map(item => item.id);
            
            let html = '';
            filteredProducts.forEach(product => {
                const isPurchased = purchasedIds.includes(product.id);
                const isLoggedIn = user !== null;
                
                // X√°c ƒë·ªãnh badge class
                let badgeClass = '';
                if (product.badge === "M·ªöI NH·∫§T") badgeClass = "badge-new";
                else if (product.badge === "ƒê√É C·∫¨P NH·∫¨T") badgeClass = "badge-update";
                else if (product.badge === "CH∆ØA C·∫¨P NH·∫¨T") badgeClass = "badge-hot";
                else if (product.badge === "QU√Ä T·∫∂NG T·∫æT") badgeClass = "badge-gift";
                
                html += `
                <div class="product-card" data-id="${product.id}" data-category="${product.category}" data-subcategory="${product.subcategory}">
                    <div class="product-image">
                        <img src="${product.coverImage}" alt="${product.name}">
                        ${product.badge ? `<div class="product-badge ${badgeClass}">${product.badge}</div>` : ''}
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${product.name}</h3>
                        <div class="product-category">${product.category} / ${product.subcategory}</div>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">
                            ${product.price === 0 ? 
                                `<span class="free-badge">MI·ªÑN PH√ç</span>` : 
                                product.salePrice ? 
                                    `<span class="current-price">${formatCurrency(product.salePrice)}</span>
                                     <span class="original-price">${formatCurrency(product.price)}</span>` :
                                    `<span class="current-price">${formatCurrency(product.price)}</span>`
                            }
                        </div>
                        <div class="product-actions">
                            ${isPurchased ? 
                                `<a href="${product.downloadLink}" target="_blank" class="btn btn-primary">T·∫£i xu·ªëng</a>` :
                                product.price === 0 ?
                                    `<button class="btn btn-primary" onclick="downloadFreeProduct('${product.id}')">T·∫£i mi·ªÖn ph√≠</button>` :
                                    `<button class="btn btn-primary ${!isLoggedIn ? 'disabled' : ''}" onclick="addToCartHandler('${product.id}')" ${!isLoggedIn ? 'disabled' : ''}>Th√™m v√†o gi·ªè</button>
                                     <button class="btn btn-outline" onclick="buyNowHandler('${product.id}')" ${!isLoggedIn ? 'disabled' : ''}>Mua ngay</button>`
                            }
                            <button class="btn btn-outline" onclick="previewProduct('${product.id}')">Xem th·ª≠</button>
                        </div>
                    </div>
                </div>
                `;
            });
            
            productsGrid.innerHTML = html;
        }
        
        // Render gi·ªè h√†ng
        function renderCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            
            if (!cartItemsContainer) return;
            
            const cart = getCart();
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-center">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>';
                cartTotalElement.textContent = '0 ƒë';
                return;
            }
            
            let html = '';
            let total = 0;
            
            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                if (product) {
                    const price = product.salePrice || product.price;
                    const itemTotal = price * cartItem.quantity;
                    total += itemTotal;
                    
                    html += `
                    <div class="cart-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; border-bottom: 1px solid var(--border-color);">
                        <div style="flex-grow: 1;">
                            <div style="font-weight: 600;">${product.name}</div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">${product.category}</div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn btn-outline btn-small" onclick="updateCartQuantity('${product.id}', ${cartItem.quantity - 1})">-</button>
                                <span>${cartItem.quantity}</span>
                                <button class="btn btn-outline btn-small" onclick="updateCartQuantity('${product.id}', ${cartItem.quantity + 1})">+</button>
                                <button class="btn btn-outline btn-small" onclick="removeCartItem('${product.id}')" style="margin-left: 1rem;">X√≥a</button>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 600;">${formatCurrency(itemTotal)}</div>
                            <div style="font-size: 0.9rem;">${formatCurrency(price)}/s·∫£n ph·∫©m</div>
                        </div>
                    </div>
                    `;
                }
            });
            
            cartItemsContainer.innerHTML = html;
            cartTotalElement.textContent = formatCurrency(total);
        }
        
        // Render l·ªãch s·ª≠ mua h√†ng
        function renderHistory(filter = 'all') {
            const historyList = document.getElementById('history-list');
            if (!historyList) return;
            
            const history = getPurchaseHistory();
            
            if (history.length === 0) {
                historyList.innerHTML = `
                    <div class="empty-history">
                        <div class="icon">üì≠</div>
                        <h3>Ch∆∞a c√≥ l·ªãch s·ª≠ mua h√†ng</h3>
                        <p>B·∫°n ch∆∞a mua t√†i li·ªáu n√†o. H√£y kh√°m ph√° c·ª≠a h√†ng v√† mua t√†i li·ªáu ƒë·∫ßu ti√™n!</p>
                        <button class="btn btn-primary mt-1" onclick="switchTab('home')">ƒê·∫øn c·ª≠a h√†ng</button>
                    </div>
                `;
                return;
            }
            
            // L·ªçc theo filter
            let filteredHistory = [...history];
            if (filter === 'recent') {
                // L·∫•y 5 m·ª•c g·∫ßn ƒë√¢y nh·∫•t
                filteredHistory = history
                    .sort((a, b) => new Date(b.purchaseDate) - new Date(a.purchaseDate))
                    .slice(0, 5);
            } else if (filter === 'free') {
                filteredHistory = history.filter(item => item.price === 0);
            }
            
            let html = '';
            filteredHistory.forEach((item, index) => {
                const purchaseDate = new Date(item.purchaseDate);
                const formattedDate = purchaseDate.toLocaleDateString('vi-VN', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                html += `
                <div class="history-item">
                    <div class="history-item-info">
                        <div class="history-item-title">${item.name}</div>
                        <div class="history-item-meta">
                            <div class="history-item-date">
                                <span>üìÖ</span>
                                <span>${formattedDate}</span>
                            </div>
                            <div class="history-item-price">
                                <span>üí∞</span>
                                <span>${formatCurrency(item.price)}</span>
                            </div>
                            <div>S·ªë l∆∞·ª£ng: ${item.quantity}</div>
                        </div>
                    </div>
                    <div class="history-item-actions">
                        <a href="${item.downloadLink}" target="_blank" class="btn btn-primary btn-small">T·∫£i xu·ªëng</a>
                    </div>
                </div>
                `;
            });
            
            historyList.innerHTML = html;
        }
        
        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng tr√™n header
        function updateCartCount() {
            const cartCountElement = document.getElementById('cart-count');
            if (!cartCountElement) return;
            
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCountElement.textContent = totalItems;
        }
        
        // C·∫≠p nh·∫≠t th√¥ng tin user tr√™n header
        function updateUserInfo() {
            const user = getCurrentUser();
            const usernameElement = document.getElementById('username');
            const balanceElement = document.getElementById('user-balance');
            
            if (user) {
                usernameElement.textContent = user.username;
                balanceElement.textContent = formatCurrency(user.balance);
            } else {
                usernameElement.textContent = 'Kh√°ch';
                balanceElement.textContent = '0 ƒë';
            }
        }
        
        // C·∫≠p nh·∫≠t th√¥ng tin t√†i kho·∫£n trong modal
        function updateAccountModal() {
            const user = getCurrentUser();
            const loginForm = document.getElementById('login-form');
            const accountInfo = document.getElementById('account-info');
            const accountAvatar = document.getElementById('account-avatar');
            const accountName = document.getElementById('account-name');
            const accountBalanceText = document.getElementById('account-balance-text');
            const statPurchases = document.getElementById('stat-purchases');
            const statSaved = document.getElementById('stat-saved');
            
            if (user) {
                // ƒê√£ ƒëƒÉng nh·∫≠p
                loginForm.classList.add('hidden');
                accountInfo.classList.remove('hidden');
                
                // C·∫≠p nh·∫≠t th√¥ng tin
                const firstLetter = user.username.charAt(0).toUpperCase();
                accountAvatar.textContent = firstLetter;
                accountAvatar.style.backgroundColor = getColorFromUsername(user.username);
                accountName.textContent = user.username;
                accountBalanceText.textContent = formatCurrency(user.balance);
                
                // T√≠nh to√°n th·ªëng k√™
                const history = getPurchaseHistory();
                const totalPurchases = history.length;
                const totalSaved = history.reduce((sum, item) => {
                    const product = products.find(p => p.id === item.id);
                    if (product && product.salePrice) {
                        return sum + (product.price - product.salePrice) * item.quantity;
                    }
                    return sum;
                }, 0);
                
                statPurchases.textContent = totalPurchases;
                statSaved.textContent = formatCurrency(totalSaved);
            } else {
                // Ch∆∞a ƒëƒÉng nh·∫≠p
                loginForm.classList.remove('hidden');
                accountInfo.classList.add('hidden');
            }
        }
        
        // H√†m t·∫°o m√†u t·ª´ username
        function getColorFromUsername(username) {
            const colors = ['#9c1c26', '#d4af37', '#27ae60', '#3498db', '#8e44ad', '#e74c3c', '#1abc9c'];
            const index = username.split('').reduce((sum, char) => sum + char.charCodeAt(0), 0) % colors.length;
            return colors[index];
        }
        
        // Format ti·ªÅn t·ªá
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
        }
        
        // L·ªçc s·∫£n ph·∫©m
        let currentFilter = {
            category: '',
            subcategory: '',
            search: '',
            badge: 'all'
        };
        
        function filterProducts(category = '', subcategory = '', search = '', badge = 'all') {
            currentFilter = { category, subcategory, search, badge };
            
            let filtered = products;
            
            // L·ªçc theo category
            if (category && category !== 'all') {
                filtered = filtered.filter(product => 
                    product.category.toLowerCase().replace(/\s+/g, ' ') === category.toLowerCase().replace(/-/g, ' ')
                );
            }
            
            // L·ªçc theo subcategory
            if (subcategory && subcategory !== 'all') {
                filtered = filtered.filter(product => 
                    product.subcategory.toLowerCase().replace(/\s+/g, ' ') === subcategory.toLowerCase().replace(/-/g, ' ')
                );
            }
            
            // L·ªçc theo search
            if (search) {
                const searchLower = search.toLowerCase();
                filtered = filtered.filter(product => 
                    product.name.toLowerCase().includes(searchLower) ||
                    product.description.toLowerCase().includes(searchLower) ||
                    product.category.toLowerCase().includes(searchLower) ||
                    product.subcategory.toLowerCase().includes(searchLower)
                );
            }
            
            // L·ªçc theo badge
            if (badge !== 'all') {
                if (badge === 'new') {
                    filtered = filtered.filter(product => product.badge === "M·ªöI NH·∫§T");
                } else if (badge === 'hot') {
                    filtered = filtered.filter(product => product.badge === "HOT");
                } else if (badge === 'update') {
                    filtered = filtered.filter(product => product.badge === "C·∫¨P NH·∫¨T");
                } else if (badge === 'gift') {
                    filtered = filtered.filter(product => product.badge === "QU√Ä T·∫∂NG T·∫æT");
                }
            }
            
            renderProducts(filtered);
        }
        
        // Render FAQ
        function renderFAQ() {
            const faqList = document.getElementById('faq-list');
            if (!faqList) return;
            
            const faqData = [
                {
                    question: "Mua t√†i li·ªáu xong t·∫£i ·ªü ƒë√¢u?",
                    answer: "Sau khi mua th√†nh c√¥ng, t√†i li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m v√†o m·ª•c L·ªãch s·ª≠ mua h√†ng c·ªßa b·∫°n. Truy c·∫≠p v√†o m·ª•c ƒë√≥ ƒë·ªÉ t·∫£i v·ªÅ."
                },
                {
                    question: "Link t·∫£i c√≥ vƒ©nh vi·ªÖn kh√¥ng?",
                    answer: "Cam k·∫øt link Google Drive s·ªëng vƒ©nh vi·ªÖn. N·∫øu c√≥ b·∫•t k·ª≥ v·∫•n ƒë·ªÅ g√¨ v·ªõi link, vui l√≤ng li√™n h·ªá h·ªó tr·ª£ ƒë·ªÉ ƒë∆∞·ª£c c·∫≠p nh·∫≠t link m·ªõi."
                },
                {
                    question: "T√¥i c·∫ßn h·ªó tr·ª£ g·∫•p?",
                    answer: "Li√™n h·ªá Telegram @tomxinh917 ho·∫∑c tham gia group @dopinews ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ nhanh nh·∫•t."
                },
                {
                    question: "C√≥ ƒë∆∞·ª£c ho√†n ti·ªÅn n·∫øu kh√¥ng h√†i l√≤ng?",
                    answer: "V√¨ t√≠nh ch·∫•t s·∫£n ph·∫©m s·ªë, ch√∫ng t√¥i kh√¥ng ho√†n ti·ªÅn sau khi ƒë√£ mua. Tuy nhi√™n, ch√∫ng t√¥i cam k·∫øt ch·∫•t l∆∞·ª£ng v√† s·∫Ω h·ªó tr·ª£ n·∫øu c√≥ v·∫•n ƒë·ªÅ k·ªπ thu·∫≠t."
                },
                {
                    question: "T√†i li·ªáu c√≥ ƒë∆∞·ª£c c·∫≠p nh·∫≠t khi c√≥ quy ƒë·ªãnh m·ªõi?",
                    answer: "C√°c t√†i li·ªáu c√≥ badge 'C·∫¨P NH·∫¨T' s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t mi·ªÖn ph√≠ khi c√≥ quy ƒë·ªãnh m·ªõi. B·∫°n ch·ªâ c·∫ßn t·∫£i l·∫°i t·ª´ l·ªãch s·ª≠ mua h√†ng."
                }
            ];
            
            let html = '';
            faqData.forEach((faq, index) => {
                html += `
                <div class="faq-item">
                    <div class="faq-question" data-index="${index}">
                        <span>${faq.question}</span>
                        <span>+</span>
                    </div>
                    <div class="faq-answer" id="faq-answer-${index}">
                        <p>${faq.answer}</p>
                    </div>
                </div>
                `;
            });
            
            faqList.innerHTML = html;
            
            // Th√™m s·ª± ki·ªán cho FAQ
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', function() {
                    const index = this.getAttribute('data-index');
                    const answer = document.getElementById(`faq-answer-${index}`);
                    const icon = this.querySelector('span:last-child');
                    
                    if (answer.classList.contains('active')) {
                        answer.classList.remove('active');
                        icon.textContent = '+';
                    } else {
                        // ƒê√≥ng t·∫•t c·∫£ c√°c c√¢u tr·∫£ l·ªùi kh√°c
                        document.querySelectorAll('.faq-answer.active').forEach(ans => {
                            ans.classList.remove('active');
                            ans.previousElementSibling.querySelector('span:last-child').textContent = '+';
                        });
                        
                        answer.classList.add('active');
                        icon.textContent = '-';
                    }
                });
            });
        }
        
        // T·∫°o hi·ªáu ·ª©ng sakura
        function createSakuraEffect() {
            const container = document.getElementById('sakura-container');
            if (!container) return;
            
            // T·∫°o 15 b√¥ng hoa sakura
            for (let i = 0; i < 15; i++) {
                const sakura = document.createElement('div');
                sakura.className = 'sakura';
                
                // Random v·ªã tr√≠ v√† k√≠ch th∆∞·ªõc
                const size = Math.random() * 10 + 5;
                const left = Math.random() * 100;
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                
                sakura.style.width = `${size}px`;
                sakura.style.height = `${size}px`;
                sakura.style.left = `${left}vw`;
                sakura.style.animationDuration = `${duration}s`;
                sakura.style.animationDelay = `${delay}s`;
                
                container.appendChild(sakura);
            }
        }
        
        // ============================================
        // KHU V·ª∞C EVENT HANDLERS
        // ============================================
        
        // Chuy·ªÉn tab
        function switchTab(tabId) {
            // ·∫®n t·∫•t c·∫£ tab content
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã tab ƒë∆∞·ª£c ch·ªçn
            const selectedTab = document.getElementById(tabId);
            if (selectedTab) {
                selectedTab.classList.add('active');
                
                // N·∫øu l√† tab history, render l·ªãch s·ª≠
                if (tabId === 'history') {
                    renderHistory();
                }
            }
            
            // C·∫≠p nh·∫≠t active state cho menu
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // T√¨m v√† active tab t∆∞∆°ng ·ª©ng
            document.querySelectorAll(`.nav-tab[data-tab="${tabId}"]`).forEach(tab => {
                tab.classList.add('active');
            });
            
            // ƒê√≥ng mobile menu n·∫øu ƒëang m·ªü
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('active')) {
                mobileMenu.classList.remove('active');
            }
        }
        
        // X·ª≠ l√Ω th√™m v√†o gi·ªè h√†ng
        function addToCartHandler(productId) {
            const user = getCurrentUser();
            if (!user) {
                showAccountModal();
                return;
            }
            
            addToCart(productId);
            showToast('ƒê√£ th√™m v√†o gi·ªè h√†ng!', 'success');
            renderCart();
        }
        
        // X·ª≠ l√Ω mua ngay
        function buyNowHandler(productId) {
            const user = getCurrentUser();
            if (!user) {
                showAccountModal();
                return;
            }
            
            // Th√™m v√†o gi·ªè h√†ng v√† m·ªü modal thanh to√°n
            addToCart(productId);
            showCartModal();
        }
        
        // X·ª≠ l√Ω t·∫£i mi·ªÖn ph√≠
        function downloadFreeProduct(productId) {
            const user = getCurrentUser();
            if (!user) {
                showAccountModal();
                return;
            }
            
            // T√¨m s·∫£n ph·∫©m
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Th√™m v√†o l·ªãch s·ª≠ mua h√†ng
            const history = getPurchaseHistory();
            if (!history.some(item => item.id === productId)) {
                addToHistory([{ id: productId, quantity: 1 }]);
                showSuccessAnimation();
                
                // C·∫≠p nh·ªïi UI sau 2 gi√¢y
                setTimeout(() => {
                    renderProducts();
                    renderHistory();
                }, 2000);
            }
            
            // M·ªü link download trong tab m·ªõi
            window.open(product.downloadLink, '_blank');
        }
        
        // Xem th·ª≠ s·∫£n ph·∫©m
        function previewProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const previewInfo = document.getElementById('preview-info');
            if (previewInfo) {
                previewInfo.innerHTML = `
                    <h3>${product.name}</h3>
                    <p><strong>Danh m·ª•c:</strong> ${product.category} / ${product.subcategory}</p>
                    <p>${product.description}</p>
                    ${product.price === 0 ? 
                        `<p class="text-red"><strong>ƒê√¢y l√† t√†i li·ªáu mi·ªÖn ph√≠!</strong></p>` : 
                        `<p><strong>Gi√°:</strong> ${formatCurrency(product.salePrice || product.price)}</p>`
                    }
                `;
            }
            
            showModal('preview-modal');
        }
        
        // X·ª≠ l√Ω thanh to√°n
        function checkoutHandler() {
            const user = getCurrentUser();
            if (!user) {
                showAccountModal();
                return;
            }
            
            const cart = getCart();
            if (cart.length === 0) {
                showToast('Gi·ªè h√†ng tr·ªëng!', 'error');
                return;
            }
            
            // T√≠nh t·ªïng ti·ªÅn
            let total = 0;
            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                if (product) {
                    const price = product.salePrice || product.price;
                    total += price * cartItem.quantity;
                }
            });
            
            // Ki·ªÉm tra s·ªë d∆∞
            if (user.balance < total) {
                showToast('S·ªë d∆∞ kh√¥ng ƒë·ªß! Vui l√≤ng n·∫°p th√™m ti·ªÅn.', 'error');
                // T·ª± ƒë·ªông focus v√†o √¥ giftcode
                document.getElementById('account-giftcode-input')?.focus();
                showAccountModal();
                return;
            }
            
            // Tr·ª´ ti·ªÅn
            updateUserBalance(user.username, -total);
            
            // Th√™m v√†o l·ªãch s·ª≠ mua h√†ng
            addToHistory(cart);
            
            // X√≥a gi·ªè h√†ng
            clearCart();
            
            // Hi·ªÉn th·ªã animation th√†nh c√¥ng
            showSuccessAnimation();
            
            // C·∫≠p nh·∫≠t UI
            updateUserInfo();
            updateAccountModal();
            renderCart();
            renderHistory();
            
            // ƒê√≥ng modal gi·ªè h√†ng
            setTimeout(() => {
                hideModal('cart-modal');
                
                // C·∫≠p nh·ªïi danh s√°ch s·∫£n ph·∫©m sau 2 gi√¢y
                setTimeout(() => {
                    renderProducts();
                }, 500);
            }, 2000);
        }
        
        // √Åp d·ª•ng giftcode trong modal t√†i kho·∫£n
        function applyGiftCodeInAccount() {
            const user = getCurrentUser();
            if (!user) {
                showToast('Vui l√≤ng ƒëƒÉng nh·∫≠p!', 'error');
                return;
            }
            
            const codeInput = document.getElementById('account-giftcode-input');
            if (!codeInput) return;
            
            const code = codeInput.value.trim().toUpperCase();
            if (!code) {
                showToast('Vui l√≤ng nh·∫≠p m√£ giftcode!', 'error');
                return;
            }
            
            // Ki·ªÉm tra m√£
            const storedGiftCodes = getFromStorage(STORAGE_KEYS.CODES) || giftCodes;
            if (storedGiftCodes[code]) {
                const amount = storedGiftCodes[code];
                updateUserBalance(user.username, amount);
                updateUserInfo();
                updateAccountModal();
                
                // X√≥a m√£ ƒë√£ s·ª≠ d·ª•ng
                delete storedGiftCodes[code];
                saveToStorage(STORAGE_KEYS.CODES, storedGiftCodes);
                
                showToast(`ƒê√£ n·∫°p th√†nh c√¥ng ${formatCurrency(amount)} v√†o v√≠!`, 'success');
                codeInput.value = '';
                
                // L∆∞u l·∫°i m√£ ƒë√£ d√πng
                const usedCodes = getFromStorage('dopi_used_codes') || {};
                usedCodes[user.username] = usedCodes[user.username] || [];
                usedCodes[user.username].push(code);
                saveToStorage('dopi_used_codes', usedCodes);
            } else {
                showToast('M√£ giftcode kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n!', 'error');
            }
        }
        
        // Th·ª±c hi·ªán ƒëƒÉng nh·∫≠p
        function performLogin() {
            const usernameInput = document.getElementById('login-username');
            const passwordInput = document.getElementById('login-password');
            
            if (!usernameInput || !passwordInput) return;
            
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            
            if (!username || !password) {
                showToast('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!', 'error');
                return;
            }
            
            const users = getFromStorage(STORAGE_KEYS.USERS);
            
            // Ki·ªÉm tra user t·ªìn t·∫°i
            if (users && users[username]) {
                // Ki·ªÉm tra m·∫≠t kh·∫©u
                if (users[username].password === password) {
                    // ƒêƒÉng nh·∫≠p th√†nh c√¥ng
                    saveToStorage(STORAGE_KEYS.SESSION, { username });
                    updateUserInfo();
                    updateAccountModal();
                    hideModal('account-modal');
                    showToast(`Ch√†o m·ª´ng ${username}!`, 'success');
                    
                    // Reset form
                    usernameInput.value = '';
                    passwordInput.value = '';
                    
                    // Render l·∫°i s·∫£n ph·∫©m ƒë·ªÉ c·∫≠p nh·∫≠t n√∫t "T·∫£i xu·ªëng"
                    renderProducts();
                } else {
                    showToast('M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c!', 'error');
                }
            } else {
                // T·∫°o user m·ªõi
                users[username] = {
                    username,
                    password,
                    balance: 0,
                    joinedDate: new Date().toISOString()
                };
                
                saveToStorage(STORAGE_KEYS.USERS, users);
                saveToStorage(STORAGE_KEYS.SESSION, { username });
                updateUserInfo();
                updateAccountModal();
                hideModal('account-modal');
                showToast(`T·∫°o t√†i kho·∫£n th√†nh c√¥ng! Ch√†o m·ª´ng ${username}!`, 'success');
                
                // Reset form
                usernameInput.value = '';
                passwordInput.value = '';
                
                // Render l·∫°i s·∫£n ph·∫©m
                renderProducts();
            }
        }
        
        // Minigame
        function openMinigame() {
            const user = getCurrentUser();
            if (!user) {
                showAccountModal();
                return;
            }
            
            showModal('minigame-modal');
        }
        
        function selectEnvelope(envelopeNumber) {
            // Random k·∫øt qu·∫£
            const results = [
                { code: "M√É10K", amount: 10000, probability: 0.5 },
                { code: "M√É20K", amount: 20000, probability: 0.3 },
                { code: "M√É50K", amount: 50000, probability: 0.15 },
                { code: "MAYMAN", amount: 0, probability: 0.05 }
            ];
            
            // T√≠nh to√°n k·∫øt qu·∫£ d·ª±a tr√™n x√°c su·∫•t
            const random = Math.random();
            let cumulative = 0;
            let result = results[0];
            
            for (const r of results) {
                cumulative += r.probability;
                if (random <= cumulative) {
                    result = r;
                    break;
                }
            }
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            const resultElement = document.getElementById('minigame-result');
            if (result.amount > 0) {
                resultElement.innerHTML = `
                    <div style="padding: 1.5rem; background-color: rgba(46, 204, 113, 0.1); border-radius: var(--radius); margin: 1rem 0;">
                        <h3 style="color: #27ae60;">üéâ Ch√∫c m·ª´ng!</h3>
                        <p>B·∫°n ƒë√£ nh·∫≠n ƒë∆∞·ª£c <strong>${formatCurrency(result.amount)}</strong></p>
                        <p>M√£ giftcode: <strong>${result.code}</strong></p>
                        <button class="btn btn-primary mt-1" onclick="useMinigameCode('${result.code}', ${result.amount})">S·ª≠ d·ª•ng ngay</button>
                    </div>
                `;
            } else {
                resultElement.innerHTML = `
                    <div style="padding: 1.5rem; background-color: rgba(241, 196, 15, 0.1); border-radius: var(--radius); margin: 1rem 0;">
                        <h3 style="color: #f39c12;">üéÅ Ch√∫c may m·∫Øn l·∫ßn sau!</h3>
                        <p>B·∫°n ƒë√£ nh·∫≠n ƒë∆∞·ª£c l·ªùi ch√∫c may m·∫Øn!</p>
                    </div>
                `;
            }
            
            // V√¥ hi·ªáu h√≥a c√°c phong bao
            document.querySelectorAll('.envelope').forEach(env => {
                env.style.pointerEvents = 'none';
                if (parseInt(env.getAttribute('data-envelope')) === envelopeNumber) {
                    env.style.transform = 'scale(1.1)';
                    env.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.3)';
                } else {
                    env.style.opacity = '0.5';
                }
            });
        }
        
        function useMinigameCode(code, amount) {
            // T·ª± ƒë·ªông ƒëi·ªÅn m√£ v√†o √¥ giftcode
            const giftcodeInput = document.getElementById('account-giftcode-input');
            if (giftcodeInput) {
                giftcodeInput.value = code;
            }
            
            // ƒê√≥ng modal minigame
            hideModal('minigame-modal');
            
            // Focus v√†o √¥ giftcode
            giftcodeInput.focus();
            
            showToast(`M√£ ${code} ƒë√£ ƒë∆∞·ª£c th√™m v√†o √¥ giftcode!`, 'success');
        }
        
        // Sao ch√©p s·ªë t√†i kho·∫£n
        function copyAccountNumber() {
            const accountElement = document.getElementById('account-number');
            if (!accountElement) return;
            
            const text = accountElement.textContent;
            
            // S·ª≠ d·ª•ng Clipboard API
            navigator.clipboard.writeText(text).then(() => {
                showToast('ƒê√£ sao ch√©p s·ªë t√†i kho·∫£n!', 'success');
            }).catch(err => {
                // Fallback cho c√°c tr√¨nh duy·ªát c≈©
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('ƒê√£ sao ch√©p s·ªë t√†i kho·∫£n!', 'success');
            });
        }
        
        // C·∫≠p nh·∫≠t countdown timer
        function updateCountdown() {
            const countdownElement = document.getElementById('countdown-timer');
            if (!countdownElement) return;
            
            // Ng√†y k·∫øt th√∫c: 30/01/2026
            const endDate = new Date('2026-01-30T23:59:59').getTime();
            const now = new Date().getTime();
            const timeLeft = endDate - now;
            
            if (timeLeft < 0) {
                countdownElement.textContent = "ƒê√£ k·∫øt th√∫c";
                return;
            }
            
            // T√≠nh ng√†y, gi·ªù, ph√∫t, gi√¢y
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            countdownElement.textContent = `${days.toString().padStart(2, '0')}:${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // ============================================
        // KHU V·ª∞C MODAL & TOAST
        // ============================================
        
        // Hi·ªÉn th·ªã modal
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        // ·∫®n modal
        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }
        
        // Hi·ªÉn th·ªã modal t√†i kho·∫£n
        function showAccountModal() {
            updateAccountModal();
            showModal('account-modal');
        }
        
        // Hi·ªÉn th·ªã toast message
        function showToast(message, type = 'info') {
            // T·∫°o toast element
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            // Style toast
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.right = '20px';
            toast.style.backgroundColor = type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db';
            toast.style.color = 'white';
            toast.style.padding = '12px 20px';
            toast.style.borderRadius = 'var(--radius)';
            toast.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            toast.style.zIndex = '9999';
            toast.style.transition = 'transform 0.3s, opacity 0.3s';
            toast.style.transform = 'translateY(20px)';
            toast.style.opacity = '0';
            
            document.body.appendChild(toast);
            
            // Hi·ªÉn th·ªã toast
            setTimeout(() => {
                toast.style.transform = 'translateY(0)';
                toast.style.opacity = '1';
            }, 10);
            
            // T·ª± ƒë·ªông ·∫©n sau 3 gi√¢y
            setTimeout(() => {
                toast.style.transform = 'translateY(20px)';
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }
        
        // Hi·ªÉn th·ªã animation th√†nh c√¥ng
        function showSuccessAnimation() {
            showModal('success-modal');
            
            // T·ª± ƒë·ªông ·∫©n sau 2 gi√¢y
            setTimeout(() => {
                hideModal('success-modal');
            }, 2000);
        }
        
        // Hi·ªÉn th·ªã modal gi·ªè h√†ng
        function showCartModal() {
            renderCart();
            showModal('cart-modal');
        }
        
        // ============================================
        // KHU V·ª∞C INITIALIZATION
        // ============================================
        
        // Kh·ªüi t·∫°o khi trang load
        document.addEventListener('DOMContentLoaded', function() {
            // Kh·ªüi t·∫°o d·ªØ li·ªáu
            initializeData();
            
            // Render UI
            renderCategories();
            renderProducts();
            renderFAQ();
            updateCartCount();
            updateUserInfo();
            createSakuraEffect();
            
            // C·∫≠p nh·∫≠t countdown m·ªói gi√¢y
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Hi·ªÉn th·ªã news popup sau 1 gi√¢y
            setTimeout(() => {
                showModal('news-popup');
            }, 1000);
            
            // ============================================
            // THI·∫æT L·∫¨P EVENT LISTENERS
            // ============================================
            
            // Tab switching
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Hamburger menu
            const hamburger = document.getElementById('hamburger');
            if (hamburger) {
                hamburger.addEventListener('click', function() {
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu) {
                        mobileMenu.classList.toggle('active');
                    }
                });
            }
            
            // Search
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    filterProducts(
                        currentFilter.category, 
                        currentFilter.subcategory, 
                        this.value, 
                        currentFilter.badge
                    );
                });
            }
            
            // Filter buttons
            document.querySelectorAll('[data-filter]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    // C·∫≠p nh·∫≠t active state
                    document.querySelectorAll('[data-filter]').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    filterProducts(
                        currentFilter.category, 
                        currentFilter.subcategory, 
                        currentFilter.search, 
                        filter
                    );
                });
            });
            
            // User info button (m·ªü modal t√†i kho·∫£n)
            document.getElementById('user-info-btn').addEventListener('click', showAccountModal);
            
            // Cart icon
            const cartIcon = document.getElementById('cart-icon');
            if (cartIcon) {
                cartIcon.addEventListener('click', showCartModal);
            }
            
            // Checkout button
            const checkoutBtn = document.getElementById('checkout-btn');
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', checkoutHandler);
            }
            
            // Perform login
            const doLoginBtn = document.getElementById('do-login');
            if (doLoginBtn) {
                doLoginBtn.addEventListener('click', performLogin);
            }
            
            // Enter ƒë·ªÉ ƒëƒÉng nh·∫≠p
            const loginPasswordInput = document.getElementById('login-password');
            if (loginPasswordInput) {
                loginPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performLogin();
                    }
                });
            }
            
            // Minigame button
            const minigameBtn = document.getElementById('minigame-btn');
            if (minigameBtn) {
                minigameBtn.addEventListener('click', openMinigame);
            }
            
            // Envelopes selection
            document.addEventListener('click', function(e) {
                if (e.target.closest('.envelope')) {
                    const envelope = e.target.closest('.envelope');
                    const envelopeNumber = parseInt(envelope.getAttribute('data-envelope'));
                    selectEnvelope(envelopeNumber);
                }
            });
            
            // Copy account number
            const copyAccountBtn = document.getElementById('copy-account');
            if (copyAccountBtn) {
                copyAccountBtn.addEventListener('click', copyAccountNumber);
            }
            
            // Apply giftcode in account modal
            document.getElementById('account-apply-giftcode')?.addEventListener('click', applyGiftCodeInAccount);
            
            // Enter ƒë·ªÉ √°p d·ª•ng giftcode trong account modal
            document.getElementById('account-giftcode-input')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    applyGiftCodeInAccount();
                }
            });
            
            // Logout button
            document.getElementById('logout-btn')?.addEventListener('click', function() {
                saveToStorage(STORAGE_KEYS.SESSION, {});
                updateUserInfo();
                updateAccountModal();
                hideModal('account-modal');
                showToast('ƒê√£ ƒëƒÉng xu·∫•t!', 'success');
                renderProducts();
                renderHistory();
            });
            
            // Close modals khi click overlay
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === this) {
                        hideModal(this.id);
                    }
                });
            });
            
            // Close buttons
            document.getElementById('close-account')?.addEventListener('click', () => hideModal('account-modal'));
            document.getElementById('close-cart')?.addEventListener('click', () => hideModal('cart-modal'));
            document.getElementById('close-preview')?.addEventListener('click', () => hideModal('preview-modal'));
            document.getElementById('close-minigame')?.addEventListener('click', () => hideModal('minigame-modal'));
            document.getElementById('close-news')?.addEventListener('click', () => hideModal('news-popup'));
            document.getElementById('close-news-btn')?.addEventListener('click', () => hideModal('news-popup'));
            
            // Footer links
            document.querySelectorAll('.footer-links a[data-tab]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // History filter buttons
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-history-filter]')) {
                    const button = e.target.closest('[data-history-filter]');
                    const filter = button.getAttribute('data-history-filter');
                    
                    // C·∫≠p nh·∫≠t active state
                    document.querySelectorAll('[data-history-filter]').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    button.classList.add('active');
                    
                    // Render v·ªõi filter m·ªõi
                    renderHistory(filter);
                }
            });
            
            // C√°c h√†m global ƒë·ªÉ g·ªçi t·ª´ HTML
            window.addToCartHandler = addToCartHandler;
            window.buyNowHandler = buyNowHandler;
            window.downloadFreeProduct = downloadFreeProduct;
            window.previewProduct = previewProduct;
            window.updateCartQuantity = function(productId, quantity) {
                updateCartItemQuantity(productId, quantity);
                renderCart();
            };
            window.removeCartItem = function(productId) {
                removeFromCart(productId);
                renderCart();
            };
            window.switchTab = switchTab;
            window.showAccountModal = showAccountModal;
            window.useMinigameCode = useMinigameCode;
        });
        
    </script>
</body>
</html>
